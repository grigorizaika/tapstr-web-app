{"remainingRequest":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grgr/Projects/tapstr/tapstr-web-app_current/src/components/UserMainScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/src/components/UserMainScreen.vue","mtime":1560698014000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport SearchPanel from './Search.vue'\nimport GoogleMap from './Map.vue'\nimport Sidebar from './Sidebar.vue'\nimport RestaurantSidebar from './RestaurantSidebar.vue'\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\n\nexport default {\n  name: 'UserMainScreen',\n  components: {\n    SearchPanel,\n    GoogleMap,\n    Sidebar,\n    RestaurantSidebar,\n  },\n  data: function () {\n        return {\n          visible: true,\n          searchVisible : true,\n          mapVisible: true,\n          resturantSidebarVisible: true,\n\n          user: Object,\n          session: Object,\n          signedIn: false,\n        }\n  },\n  created() {\n    this.findUser();\n    /* AmplifyEventBus events pertain to amplify components.\n       Here we add a listener for the auth components, and when\n       they are triggered, info is returned, e. g. 'signedIn', 'signedOut', 'signUp',\n       https://aws-amplify.github.io/docs/js/vue#amplifyeventbus\n    */\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        console.log(\"info: \")\n        console.log(info)\n        this.findUser();\n      } else if(info == \"signedOut\") {\n        this.$store.commit('changeUserClient', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n      else {\n        console.log(\"info: \")\n        console.log(info)\n        this.signedIn = false;\n      }\n    });\n  },\n\n  methods: {\n    async findUser() {\n      try {\n        /*\n          TODO:\n          appending\n          .then((data) => console.log(data)) or\n          .catch((err) => console.log('err ' + err));\n          to Auth.currentAuthenticatedUser()\n          results in this.user staying undefined\n          why?\n\n          read up on promises, callbackes, async, await.\n        */\n        this.$store.commit('changeUserClient', await Auth.currentAuthenticatedUser());\n        this.$store.commit('changeUserSession', await Auth.currentSession());\n      } catch (err) {\n        console.log(err)\n       /* this.$store.commit('changeIsSignedIn', false);*/\n      }\n    },\n\n    toggleSidebar: function() {\n      this.$refs.sidebar.toggle();\n    },\n    hideSidebar: function() {\n      this.$refs.sidebar.hide();\n    },\n    removeSearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = false;\n    },\n    displaySearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = true;\n    },\n\n  },\n\n  watch: {\n  '$route' (to, from) {\n    const toDepth = to.path.split('/').length\n    const fromDepth = from.path.split('/').length\n    if (toDepth > fromDepth) {\n\n    }\n    }\n  }\n};\n",{"version":3,"sources":["UserMainScreen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"UserMainScreen.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <b-container fluid id=\"userMainScreen\" class=\"p-0 m-0\">\n      <sidebar ref=\"sidebar\"></sidebar>\n      <restaurant-sidebar></restaurant-sidebar>\n      <google-map v-on:click.native=\"hideSidebar()\" @mapZoomClose=\"removeSearch()\" @mapZoomFar=\"displaySearch()\" class=\"gMap\" ref=\"gmap\" name=\"example\"></google-map>\n\n\n      <b-row class=\"vh-100\">\n\n        <b-col cols=\"9\">\n\n          <b-row class=\"h-25 p-4\">\n            <b-col cols=\"2\">\n              <div @click=\"toggleSidebar()\" id=\"userImage\" class=\"mx-auto\"></div>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"h-50 p-4\">\n\n            <b-col cols=\"6\">\n            </b-col>\n            <b-col cols=\"5\">\n              <!--transition name=\"fade\" mode=\"out-in\">\n                <search-panel id=\"searchPanel\" v-if=\"searchVisible\" v-on:click.native=\"hideSidebar()\"></search-panel>\n              </transition-->\n\n            </b-col>\n            <b-col cols=\"1\">\n            </b-col>\n\n          </b-row>\n\n      </b-col>\n\n      <b-col cols=\"3\">\n        <b-row class=\"h-100\">\n        </b-row>\n      </b-col>\n\n    </b-row>\n\n\n  </b-container>\n</template>\n\n<script>\nimport SearchPanel from './Search.vue'\nimport GoogleMap from './Map.vue'\nimport Sidebar from './Sidebar.vue'\nimport RestaurantSidebar from './RestaurantSidebar.vue'\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\n\nexport default {\n  name: 'UserMainScreen',\n  components: {\n    SearchPanel,\n    GoogleMap,\n    Sidebar,\n    RestaurantSidebar,\n  },\n  data: function () {\n        return {\n          visible: true,\n          searchVisible : true,\n          mapVisible: true,\n          resturantSidebarVisible: true,\n\n          user: Object,\n          session: Object,\n          signedIn: false,\n        }\n  },\n  created() {\n    this.findUser();\n    /* AmplifyEventBus events pertain to amplify components.\n       Here we add a listener for the auth components, and when\n       they are triggered, info is returned, e. g. 'signedIn', 'signedOut', 'signUp',\n       https://aws-amplify.github.io/docs/js/vue#amplifyeventbus\n    */\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        console.log(\"info: \")\n        console.log(info)\n        this.findUser();\n      } else if(info == \"signedOut\") {\n        this.$store.commit('changeUserClient', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n      else {\n        console.log(\"info: \")\n        console.log(info)\n        this.signedIn = false;\n      }\n    });\n  },\n\n  methods: {\n    async findUser() {\n      try {\n        /*\n          TODO:\n          appending\n          .then((data) => console.log(data)) or\n          .catch((err) => console.log('err ' + err));\n          to Auth.currentAuthenticatedUser()\n          results in this.user staying undefined\n          why?\n\n          read up on promises, callbackes, async, await.\n        */\n        this.$store.commit('changeUserClient', await Auth.currentAuthenticatedUser());\n        this.$store.commit('changeUserSession', await Auth.currentSession());\n      } catch (err) {\n        console.log(err)\n       /* this.$store.commit('changeIsSignedIn', false);*/\n      }\n    },\n\n    toggleSidebar: function() {\n      this.$refs.sidebar.toggle();\n    },\n    hideSidebar: function() {\n      this.$refs.sidebar.hide();\n    },\n    removeSearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = false;\n    },\n    displaySearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = true;\n    },\n\n  },\n\n  watch: {\n  '$route' (to, from) {\n    const toDepth = to.path.split('/').length\n    const fromDepth = from.path.split('/').length\n    if (toDepth > fromDepth) {\n\n    }\n    }\n  }\n};\n</script>\n\n<style>\n\n#userMainScreen {\n  min-width: 100vw;\n  min-height: 100vh;\n  padding: 0 0;\n  overflow: hidden;\n}\n\n#userImage {\n  width: 64px;\n  height: 64px;\n  left: calc(50% - 32px);\n  top: calc(50% - 32px);\n  position: absolute;\n  background: #ffffff;\n  z-index: 99;\n  background-image: url('https://tapstr-files.s3.eu-central-1.amazonaws.com/images/menu/avocado.jpg');\n  background-size: cover;\n  background-repeat: no-repeat;\n  /* border-radius */\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n  /* box-shadow */\n  -webkit-box-shadow: rgba(0,0,0,0.8) 0px 0 10px;\n  -moz-box-shadow: rgba(0,0,0,0.8) 0 0 10px;\n  box-shadow: rgba(0,0,0,0.8) 0 0 10px;\n}\n\n#userImage:hover {\n  cursor: pointer;\n}\n\n#searchPanel {\n  position: absolute;\n  z-index: 99;\n}\n\n\n\n#routerView {\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n}\n\n.gMap {\n  position: absolute;\n  z-index: 10;\n  padding: 0;\n  margin: 0;\n}\n\n\n.loginForm {\n    position: relative;\n    z-index: 100;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n</style>\n"]}]}