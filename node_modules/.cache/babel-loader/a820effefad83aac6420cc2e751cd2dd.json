{"remainingRequest":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/babel-loader/lib/index.js!/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grgr/Projects/tapstr/tapstr-web-app_current/src/components/UserMainScreen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/src/components/UserMainScreen.vue","mtime":1560698014000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/grgr/Projects/tapstr/tapstr-web-app_current/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchPanel from \"./Search.vue\";\nimport GoogleMap from \"./Map.vue\";\nimport Sidebar from \"./Sidebar.vue\";\nimport RestaurantSidebar from \"./RestaurantSidebar.vue\";\nimport { Auth } from 'aws-amplify';\nimport { AmplifyEventBus } from 'aws-amplify-vue';\nexport default {\n  name: 'UserMainScreen',\n  components: {\n    SearchPanel: SearchPanel,\n    GoogleMap: GoogleMap,\n    Sidebar: Sidebar,\n    RestaurantSidebar: RestaurantSidebar\n  },\n  data: function data() {\n    return {\n      visible: true,\n      searchVisible: true,\n      mapVisible: true,\n      resturantSidebarVisible: true,\n      user: Object,\n      session: Object,\n      signedIn: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.findUser();\n    /* AmplifyEventBus events pertain to amplify components.\n       Here we add a listener for the auth components, and when\n       they are triggered, info is returned, e. g. 'signedIn', 'signedOut', 'signUp',\n       https://aws-amplify.github.io/docs/js/vue#amplifyeventbus\n    */\n\n    AmplifyEventBus.$on('authState', function (info) {\n      if (info === \"signedIn\") {\n        console.log(\"info: \");\n        console.log(info);\n\n        _this.findUser();\n      } else if (info == \"signedOut\") {\n        _this.$store.commit('changeUserClient', undefined);\n\n        _this.$store.commit('changeUserSession', undefined);\n      } else {\n        console.log(\"info: \");\n        console.log(info);\n        _this.signedIn = false;\n      }\n    });\n  },\n  methods: {\n    findUser: function () {\n      var _findUser = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.t0 = this.$store;\n                _context.next = 4;\n                return Auth.currentAuthenticatedUser();\n\n              case 4:\n                _context.t1 = _context.sent;\n\n                _context.t0.commit.call(_context.t0, 'changeUserClient', _context.t1);\n\n                _context.t2 = this.$store;\n                _context.next = 9;\n                return Auth.currentSession();\n\n              case 9:\n                _context.t3 = _context.sent;\n\n                _context.t2.commit.call(_context.t2, 'changeUserSession', _context.t3);\n\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t4 = _context[\"catch\"](0);\n                console.log(_context.t4);\n                /* this.$store.commit('changeIsSignedIn', false);*/\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      function findUser() {\n        return _findUser.apply(this, arguments);\n      }\n\n      return findUser;\n    }(),\n    toggleSidebar: function toggleSidebar() {\n      this.$refs.sidebar.toggle();\n    },\n    hideSidebar: function hideSidebar() {\n      this.$refs.sidebar.hide();\n    },\n    removeSearch: function removeSearch() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = false;\n    },\n    displaySearch: function displaySearch() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = true;\n    }\n  },\n  watch: {\n    '$route': function $route(to, from) {\n      var toDepth = to.path.split('/').length;\n      var fromDepth = from.path.split('/').length;\n\n      if (toDepth > fromDepth) {}\n    }\n  }\n};",{"version":3,"sources":["UserMainScreen.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <b-container fluid id=\"userMainScreen\" class=\"p-0 m-0\">\n      <sidebar ref=\"sidebar\"></sidebar>\n      <restaurant-sidebar></restaurant-sidebar>\n      <google-map v-on:click.native=\"hideSidebar()\" @mapZoomClose=\"removeSearch()\" @mapZoomFar=\"displaySearch()\" class=\"gMap\" ref=\"gmap\" name=\"example\"></google-map>\n\n\n      <b-row class=\"vh-100\">\n\n        <b-col cols=\"9\">\n\n          <b-row class=\"h-25 p-4\">\n            <b-col cols=\"2\">\n              <div @click=\"toggleSidebar()\" id=\"userImage\" class=\"mx-auto\"></div>\n            </b-col>\n          </b-row>\n\n          <b-row class=\"h-50 p-4\">\n\n            <b-col cols=\"6\">\n            </b-col>\n            <b-col cols=\"5\">\n              <!--transition name=\"fade\" mode=\"out-in\">\n                <search-panel id=\"searchPanel\" v-if=\"searchVisible\" v-on:click.native=\"hideSidebar()\"></search-panel>\n              </transition-->\n\n            </b-col>\n            <b-col cols=\"1\">\n            </b-col>\n\n          </b-row>\n\n      </b-col>\n\n      <b-col cols=\"3\">\n        <b-row class=\"h-100\">\n        </b-row>\n      </b-col>\n\n    </b-row>\n\n\n  </b-container>\n</template>\n\n<script>\nimport SearchPanel from './Search.vue'\nimport GoogleMap from './Map.vue'\nimport Sidebar from './Sidebar.vue'\nimport RestaurantSidebar from './RestaurantSidebar.vue'\nimport { Auth } from 'aws-amplify'\nimport { AmplifyEventBus } from 'aws-amplify-vue'\n\nexport default {\n  name: 'UserMainScreen',\n  components: {\n    SearchPanel,\n    GoogleMap,\n    Sidebar,\n    RestaurantSidebar,\n  },\n  data: function () {\n        return {\n          visible: true,\n          searchVisible : true,\n          mapVisible: true,\n          resturantSidebarVisible: true,\n\n          user: Object,\n          session: Object,\n          signedIn: false,\n        }\n  },\n  created() {\n    this.findUser();\n    /* AmplifyEventBus events pertain to amplify components.\n       Here we add a listener for the auth components, and when\n       they are triggered, info is returned, e. g. 'signedIn', 'signedOut', 'signUp',\n       https://aws-amplify.github.io/docs/js/vue#amplifyeventbus\n    */\n    AmplifyEventBus.$on('authState', info => {\n      if(info === \"signedIn\") {\n        console.log(\"info: \")\n        console.log(info)\n        this.findUser();\n      } else if(info == \"signedOut\") {\n        this.$store.commit('changeUserClient', undefined);\n        this.$store.commit('changeUserSession', undefined);\n      }\n      else {\n        console.log(\"info: \")\n        console.log(info)\n        this.signedIn = false;\n      }\n    });\n  },\n\n  methods: {\n    async findUser() {\n      try {\n        /*\n          TODO:\n          appending\n          .then((data) => console.log(data)) or\n          .catch((err) => console.log('err ' + err));\n          to Auth.currentAuthenticatedUser()\n          results in this.user staying undefined\n          why?\n\n          read up on promises, callbackes, async, await.\n        */\n        this.$store.commit('changeUserClient', await Auth.currentAuthenticatedUser());\n        this.$store.commit('changeUserSession', await Auth.currentSession());\n      } catch (err) {\n        console.log(err)\n       /* this.$store.commit('changeIsSignedIn', false);*/\n      }\n    },\n\n    toggleSidebar: function() {\n      this.$refs.sidebar.toggle();\n    },\n    hideSidebar: function() {\n      this.$refs.sidebar.hide();\n    },\n    removeSearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = false;\n    },\n    displaySearch: function() {\n      /* TODO: replace with a transition later */\n      this.searchVisible = true;\n    },\n\n  },\n\n  watch: {\n  '$route' (to, from) {\n    const toDepth = to.path.split('/').length\n    const fromDepth = from.path.split('/').length\n    if (toDepth > fromDepth) {\n\n    }\n    }\n  }\n};\n</script>\n\n<style>\n\n#userMainScreen {\n  min-width: 100vw;\n  min-height: 100vh;\n  padding: 0 0;\n  overflow: hidden;\n}\n\n#userImage {\n  width: 64px;\n  height: 64px;\n  left: calc(50% - 32px);\n  top: calc(50% - 32px);\n  position: absolute;\n  background: #ffffff;\n  z-index: 99;\n  background-image: url('https://tapstr-files.s3.eu-central-1.amazonaws.com/images/menu/avocado.jpg');\n  background-size: cover;\n  background-repeat: no-repeat;\n  /* border-radius */\n  -webkit-border-radius: 50%;\n  -moz-border-radius: 50%;\n  border-radius: 50%;\n  /* box-shadow */\n  -webkit-box-shadow: rgba(0,0,0,0.8) 0px 0 10px;\n  -moz-box-shadow: rgba(0,0,0,0.8) 0 0 10px;\n  box-shadow: rgba(0,0,0,0.8) 0 0 10px;\n}\n\n#userImage:hover {\n  cursor: pointer;\n}\n\n#searchPanel {\n  position: absolute;\n  z-index: 99;\n}\n\n\n\n#routerView {\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n}\n\n.gMap {\n  position: absolute;\n  z-index: 10;\n  padding: 0;\n  margin: 0;\n}\n\n\n.loginForm {\n    position: relative;\n    z-index: 100;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}